function createXmlHttpRequest(){try{if("undefined"!=typeof ActiveXObject)return new ActiveXObject("Microsoft.XMLHTTP");if(window.XMLHttpRequest)return new XMLHttpRequest}catch(e){changeStatus(e)}return null}function downloadUrl(e,t){var o=-1,n=createXmlHttpRequest();if(!n)return!1;n.onreadystatechange=function(){if(4==n.readyState){try{o=n.status}catch(e){}200!=o&&0!=o||(t(n.responseText,n.status),n.onreadystatechange=function(){})}},n.open("GET",e,!0);try{n.send(null)}catch(r){changeStatus(r)}}function xmlParse(e){if("undefined"!=typeof ActiveXObject&&"undefined"!=typeof GetObject){var t=new ActiveXObject("Microsoft.XMLDOM");return t.loadXML(e),t}return"undefined"!=typeof DOMParser?(new DOMParser).parseFromString(e,"text/xml"):createElement("div",null)}function downloadScript(e){var t=document.createElement("script");t.src=e,document.body.appendChild(t)}function createMarker(e,t,o,n,r,a,s){var l="<strong>"+o+"</strong><br><br><span>Address:"+a+"</span><br><span>Bedrooms:"+o+"</span><br><p>"+n+"</p>",i=new google.maps.Marker({position:e,title:t,maintitle:o,bedrooms:r,address:a,price:s,xcontent:n,zIndex:Math.round(e.lat()*-1e5)<<5});google.maps.event.addListener(i,"click",function(){infowindow.setContent(l),infowindow.open(map,i)}),gmarkers.push(i)}function initialize(){jQuery([document.documentElement,document.body]).animate({scrollTop:jQuery("#results_search").offset().top},1e3);for(var e=location.search.substring(1),t=e.split("&"),o=0;o<t.length;o++){var n=t[o].indexOf("="),r=t[o].substring(0,n).toLowerCase(),a=t[o].substring(n+1).toLowerCase();"radius"==r&&(document.getElementById("radius").value=unescape(a),codeAddress()),"address"==r&&(document.getElementById("address").value=unescape(a),codeAddress())}var s={zoom:8,center:new google.maps.LatLng(53.481308,(-2.242336)),mapTypeControl:!0,mapTypeControlOptions:{style:google.maps.MapTypeControlStyle.DROPDOWN_MENU},navigationControl:!0,mapTypeId:google.maps.MapTypeId.ROADMAP};map=new google.maps.Map(document.getElementById("map_canvas"),s),downloadUrl("markers.xml",function(e){for(var t=xmlParse(e),o=t.documentElement.getElementsByTagName("marker"),n=document.getElementById("bedroom_number").value,r=0;r<o.length;r++){var a=parseFloat(o[r].getAttribute("lat")),s=parseFloat(o[r].getAttribute("lng")),l=new google.maps.LatLng(a,s),i=o[r].getAttribute("id"),d=o[r].getAttribute("title"),c=o[r].getAttribute("bedrooms"),m=o[r].getAttribute("content"),p=o[r].getAttribute("address"),u=o[r].getAttribute("price");if(n>=c){createMarker(l,i,d,m,c,p,u)}}})}function codeAddress(){var e=document.getElementById("address").value,t=1e3*parseInt(document.getElementById("radius").value,10);geocoder.geocode({address:e},function(e,o){if(o==google.maps.GeocoderStatus.OK){map.setCenter(e[0].geometry.location);var n=e[0].geometry.location;circle&&circle.setMap(null),circle=new google.maps.Circle({center:n,radius:t,fillOpacity:.3,strokeColor:"#F7AE47",strokeOpacity:.8,strokeWeight:2,fillColor:"#F7AE47",map:map});for(var r=new google.maps.LatLngBounds,a=0,s=0;s<gmarkers.length;s++)if(google.maps.geometry.spherical.computeDistanceBetween(gmarkers[s].getPosition(),n)<t){var l='<div class="itemWrapper"><div class="img_wrapper"></div><div class="content_wrapper"><div class="bg_inner"><span>Development Found</span><h3>'+gmarkers[s].maintitle+'</h3><h4 class="location_title">'+gmarkers[s].address+'</h4><h4 class="price_title">'+gmarkers[s].bedrooms+" bed home from Â£"+gmarkers[s].price+"</h4><p>"+gmarkers[s].xcontent+'</p><a href="#" class="btn_ywllow_mre_brder">View development</a></div></div></div>';r.extend(gmarkers[s].getPosition()),gmarkers[s].setMap(map),rowContent+=l,a++}else gmarkers[s].setMap(null);document.getElementById("found_results").innerHTML=rowContent}else alert("Geocode was not successful for the following reason: "+o)})}var rowContent="",gmarkers=[],map=null,circle=null,geocoder=new google.maps.Geocoder,infowindow=new google.maps.InfoWindow({size:new google.maps.Size(150,50)}),input=document.getElementById("address"),options={componentRestrictions:{country:"uk"}};autocomplete=new google.maps.places.Autocomplete(input,options),jQuery(document).ready(function(e){e(window).on("load",function(){e(".overlay_map_result").delay(825).fadeOut("625")}),e(window).scroll(function(){var t=e(window).scrollTop();t>=20?e("header").addClass("collapsed_header"):e("header").removeClass("collapsed_header")})});